# 商品分析模块

## 进度

### 已实现的功能

#### 输出结果及其分析

1. 商品销售分析：
   - 成功统计了每个商品的总销量、总销售额、订单次数、平均销售额和热销时段
   - 示例：小银鱼/干虾 干果150g 总销量147件，总销售额3486元，平均每单35.94元，热销时段为9点

2. 高取消率商品识别：
   - 正确计算了每个商品的订单取消率
   - 识别出取消率高于平均水平的商品：小银鱼/干虾 干果150g(14.46%)、辣白菜 袋装(9.80%)等

3. 商品关联分析：
   - 使用Apriori算法发现了商品之间的关联关系
   - 识别出最常一起购买的商品组合：小银鱼/干虾 干果150g + 拌桔梗（咸口&甜口）250g(支持度8.82%)

4. 分类销售排名：
   - 成功统计了一级分类的销售数据
   - 结果显示"食品"类销售额最高，达8435元

5. 运营建议：
   - 基于分析结果生成了可操作的运营建议
   - 建议关注高取消率商品、推广热销商品、利用商品关联组合促销

6. 文件输出：
   - 成功生成了CSV报告文件和销售分析图表
   - 图表保存为product_sales_analysis.png

#### 已实现功能及其对应函数

以下是代码中已实现的核心功能及其对应的函数：

| 功能 | 对应函数 | 描述 |
|------|----------|------|
| 数据库连接与数据加载 | `__init__()` 和 `load_data()` | 连接MySQL数据库，加载订单、商品和分类数据 |
| 商品销售分析 | `sales_analysis()` | 计算商品总销量、总销售额、平均销售额和热销时段 |
| 高取消率商品识别 | `cancellation_analysis()` | 识别取消率高于平均水平的商品 |
| 商品关联分析 | `association_analysis()` | 使用Apriori算法发现商品关联组合 |
| 分类销售排名 | `category_analysis()` | 统计各级分类的销量和销售额排名 |
| 销售数据可视化 | `visualize_sales()` | 生成销售额和销量TOP商品的图表 |
| 报告生成 | `generate_report()` | 整合所有分析结果生成完整报告 |
| 运营建议生成 | `generate_recommendations()` | 基于分析结果生成可操作的运营建议 |
| 日期筛选 | `filter_by_date()` | 按时间范围筛选数据 |

### 待实现的功能

#### 模块结构优化

```txt
backend/
├── product_analysis.py        # 主分析脚本
├── config.py                  # 配置文件（可选）
├── requirements.txt           # 依赖文件
├── reports/                   # 报告目录
│   ├── product_sales_report_20250712_143022.csv
│   ├── high_cancel_products_20250712_143022.csv
│   └── product_associations_20250712_143022.csv
└── charts/                    # 图表目录
    └── product_sales_analysis_20250712_143022.png
```

## 说明

> 所有功能暂时都放在了`/backend/product-analysis/`目录下的`product_analysis.py`文件中，后续会对模块结构做调整
